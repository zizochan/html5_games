!function e(t,n,i){function a(o,u){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return a(n?n:e)},f,f.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];i(this,e),this.canvasId=t,null==n&&(n=this.getDefaultWrapperId()),this.wrapperId=n}return a(e,[{key:"getDefaultWrapperId",value:function(){return this.canvasId+"-wrapper"}},{key:"addFullscreenCanvas",value:function(){var e=this.addWrapper();this.addCanvas(e)}},{key:"addWrapper",value:function(){var e=$("<div>").attr({id:this.wrapperId}).appendTo("body");return e.css({width:"100%",height:"100%"}),e}},{key:"addCanvas",value:function(e){var t=$("<canvas>").attr({id:this.canvasId}).appendTo(e);t.attr("width",e.width()).attr("height",e.height()),t.css({"touch-action":"none"})}},{key:"getWidth",value:function(){return $("#"+this.canvasId).width()}},{key:"getHeight",value:function(){return $("#"+this.canvasId).height()}}]),e}();n["default"]=r},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.DEFAULT_ADVANCE_SPEED=25,n.SIDE_SPEED=30,n.STAR_NUMBER=200,n.IMAGE_DIR="./images",n.CANVAS_ID="canvas",n.TIMER_INTERVAL=50,n.HIDDEN_IMAGES=[],n.STAR={MAX_WHEEL_SPEED:5,INVISIBLE_DISTANCE:4e3,HIT_SIZE:50,HIT_DISTANCE:64},n.KEY_CODE={LEFT:37,UP:38,RIGHT:39,DOWN:40}},{}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r={TITLE:1,PLAY:2,GAMEOVER:3},o=function(){function e(){i(this,e),this.reset()}return a(e,[{key:"getStatus",value:function(){return r}},{key:"reset",value:function(){this.state=r.TITLE}},{key:"isTitle",value:function(){return this.state==r.TITLE}},{key:"changePlay",value:function(){this.state=r.PLAY}},{key:"isPlay",value:function(){return this.state==r.PLAY}},{key:"changeGameover",value:function(){this.state=r.GAMEOVER}},{key:"isGameover",value:function(){return this.state==r.GAMEOVER}}]),e}();n["default"]=o},{}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n){i(this,e),this.images=n,this.dir=t}return a(e,[{key:"addHiddenImages",value:function(){for(var e=0;e<this.images.length;e++){var t=this.images[e];this.addHiddenImage(t)}}},{key:"addHiddenImage",value:function(e){var t=this.getImageId(e),n=this.dir+"/"+e;return this.appendHideImageToBody(n,t)}},{key:"getImageId",value:function(e){return"img-"+e.replace(/\.[^.]+$/,"")}},{key:"appendHideImageToBody",value:function(e,t){return $("<img>").attr({src:e,id:t}).hide().appendTo("body")}}]),e}();n["default"]=r},{}],5:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var r,o,u,s,c,f,h,l,d,v,y,g,p=e("./config"),k=a(p),m=e("./star"),E=i(m),I=e("./ship"),_=i(I),b=e("./operate"),w=i(b),T=e("./flag"),C=i(T),D=e("./paint"),A=i(D),P=e("./image_utility"),M=i(P),S=e("./canvas_utility"),H=i(S),N=function(){f=new M["default"](k.IMAGE_DIR,k.HIDDEN_IMAGES),h=new H["default"](k.CANVAS_ID),f.addHiddenImages(),W(),u=new w["default"](y,g,k.KEY_CODE),s=new C["default"],c=new A["default"](k.CANVAS_ID,y,g),O(),$("#startButton").get(0).onclick=x},O=function(){l=0,d=k.DEFAULT_ADVANCE_SPEED,R(),o=new _["default"](0,0,k.SIDE_SPEED,y,g,k.KEY_CODE),u.resetKeymap(),s.reset(),V()},x=function(){L(),$("<body>").get(0).addEventListener("touchmove",function(e){e.preventDefault()},!1),v=setInterval(z,k.TIMER_INTERVAL),$("#startButton").hide(),s.changePlay()},W=function(){h.addFullscreenCanvas(),y=h.getWidth(),g=h.getHeight()},R=function(){r=[];for(var e=0;e<k.STAR_NUMBER;e++)r.push(new E["default"](y,g,k.STAR,"img-rock"))},L=function(){onkeydown=j,onkeyup=G;var e=$("#"+k.CANVAS_ID).get(0);e.onmousedown=U,e.onmouseup=B,e.oncontextmenu=function(e){e.preventDefault()},e.addEventListener("touchstart",U),e.addEventListener("touchend",B)},j=function(e){u.keyDown(e)},G=function(e){u.keyUp(e)},U=function(e){u.mouseDown(e)},B=function(e){u.mouseUp(e)},V=function(){c.background(),K(),c.front(l),s.isGameover()&&c.gameOver()},Y=function(){r.sort(function(e,t){return t.z-e.z})},K=function(){Y();for(var e=0;e<k.STAR_NUMBER;e++){var t=r[e];t.shouldDraw()&&c.star(t,o)}},z=function(){for(var e=0;e<k.STAR_NUMBER;e++){var t=r[e];if(!t.move(o,d)){F();break}}l++%10==0&&d++,o.move(u.keymap),V()},F=function(){clearInterval(v),v=NaN,s.changeGameover()};window.onload=N},{"./canvas_utility":1,"./config":2,"./flag":3,"./image_utility":4,"./operate":7,"./paint":8,"./ship":9,"./star":10}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e)}return a(e,[{key:"getXPosition",value:function(e){return isNaN(e.offsetX)?e.touches[0].clientX:e.offsetX}},{key:"getYPosition",value:function(e){return isNaN(e.offsetY)?e.touches[0].clientY:e.offsetY}}]),e}();n["default"]=r},{}],7:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e("./mouse_utility"),u=i(o),s=new u["default"],c=function(){function e(t,n,i){a(this,e),this.resetKeymap(),this.canvasWidth=t,this.canvasHeight=n,this.keyCode=i}return r(e,[{key:"resetKeymap",value:function(){this.keymap={}}},{key:"keyDown",value:function(e){this.keymap[e.keyCode]=!0}},{key:"keyUp",value:function(e){this.keymap[e.keyCode]=!1}},{key:"mouseDown",value:function(e){var t=s.getXPosition(e)-Math.floor(this.canvasWidth/2),n=s.getYPosition(e)-Math.floor(this.canvasHeight/2),i=this.keyPressByMousePosition(t,n);this.keymap[i]=!0}},{key:"keyPressByMousePosition",value:function(e,t){var n;return n=Math.abs(e)>Math.abs(t)?e>0?this.keyCode.RIGHT:this.keyCode.LEFT:t>0?this.keyCode.DOWN:this.keyCode.UP}},{key:"mouseUp",value:function(e){this.resetKeymap()}}]),e}();n["default"]=c},{"./mouse_utility":6}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n,a){i(this,e),this.ctx=this.getCtx(t),this.canvasWidth=n,this.canvasHeight=a,this.scopeImage=$("#img-scope").get(0)}return a(e,[{key:"getCtx",value:function(e){var t=$("#"+e),n=t.get(0).getContext("2d");return n.font="20pt Arial",n}},{key:"background",value:function(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight)}},{key:"front",value:function(e){this.ctx.drawImage(this.scopeImage,0,0,this.canvasWidth,this.canvasHeight),this.ctx.fillStyle="green",this.ctx.fillText(this.roundDigit(7,e),.9*this.canvasWidth-50,.1*this.canvasHeight-7)}},{key:"roundDigit",value:function(e,t){var n,i=String(t).length;return n=i>e?Array(e+1).join("9"):(Array(e+1).join("0")+t).slice(e*-1)}},{key:"gameOver",value:function(){this.ctx.fillText("GAME OVER",.5*this.canvasWidth-85,.5*this.canvasHeight-10-20)}},{key:"star",value:function(e,t){var n=e.z,i=(e.x-t.x<<9)/n+e.canvasWidth/2,a=(e.y-t.y<<9)/n+e.canvasHeight/2,r=(e.config.HIT_SIZE<<9)/n;this.ctx.save(),this.ctx.translate(i,a),this.ctx.globalAlpha=1-n/4096,this.ctx.rotate(e.r*Math.PI/180),this.ctx.drawImage(e.image,-r/2,-r/2,r,r),this.ctx.restore()}}]),e}();n["default"]=r},{}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n,a,r,o,u){i(this,e),this.x=t,this.y=n,this.sideSpeed=a,this.canvasWidth=r,this.canvasHeight=o,this.keyCode=u}return a(e,[{key:"move",value:function(e){this.moveByKeymap(e),this.roundInCanvas()}},{key:"moveByKeymap",value:function(e){e[this.keyCode.RIGHT]?this.x+=this.sideSpeed:e[this.keyCode.LEFT]&&(this.x-=this.sideSpeed),e[this.keyCode.DOWN]?this.y+=this.sideSpeed:e[this.keyCode.UP]&&(this.y-=this.sideSpeed)}},{key:"round",value:function(e,t,n){return n<e&&(n=e),n>t&&(n=t),n}},{key:"roundInCanvas",value:function(){this.x=this.round(this.canvasWidth*-1,this.canvasWidth,this.x),this.y=this.round(this.canvasHeight*-1,this.canvasHeight,this.y)}}]),e}();n["default"]=r},{}],10:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t,n,a,r){i(this,e),this.config=a,this.canvasWidth=t,this.canvasHeight=n,this.setNewCoordinates(),this.z=this.random(0,5*this.canvasWidth),this.r=this.random(0,360);var o=this.config.MAX_WHEEL_SPEED;this.w=this.random(o*-1,o),this.image=$("#"+r).get(0)}return a(e,[{key:"random",value:function(e,t){if(t<e)throw new Error("max must be greater than min");return Math.floor(Math.random()*(t-e))+e}},{key:"setNewCoordinates",value:function(){this.x=this.random(this.canvasWidth*-2,2*this.canvasWidth),this.y=this.random(this.canvasWidth*-2,2*this.canvasHeight)}},{key:"shouldDraw",value:function(){return this.z<=this.config.INVISIBLE_DISTANCE}},{key:"move",value:function(e,t){return this.drawNear(t),this.checkOvertake(e)}},{key:"drawNear",value:function(e){this.z-=e,this.r+=this.w}},{key:"checkOvertake",value:function(e){return this.z>=this.config.HIT_DISTANCE||!this.isHit(e)&&(this.regenerate(),!0)}},{key:"isHit",value:function(e){return Math.abs(this.x-e.x)<this.config.HIT_SIZE&&Math.abs(this.y-e.y)<this.config.HIT_SIZE}},{key:"regenerate",value:function(){this.setNewCoordinates(),this.z=5*this.canvasWidth}}]),e}();n["default"]=r},{}]},{},[5]);